{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-async/source/failure.ico","path":"failure.ico","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/sw.js","path":"sw.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/img/banner.png","path":"img/banner.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/img/avatar.jpg","path":"img/avatar.jpg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/img/block.jpg","path":"img/block.jpg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/img/favicon.svg","path":"img/favicon.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/css/index.less","path":"css/index.less","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/css/plugins/bootstrap.min.css","path":"css/plugins/bootstrap.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/css/plugins/bootstrap.row.css","path":"css/plugins/bootstrap.row.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/css/plugins/font-awesome.min.css","path":"css/plugins/font-awesome.min.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/fonts/webfonts/fa-brands-400.woff2","path":"fonts/webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/fonts/webfonts/fa-regular-400.woff2","path":"fonts/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/fonts/webfonts/fa-solid-900.woff2","path":"fonts/webfonts/fa-solid-900.woff2","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/js/plugins/danmu.js","path":"js/plugins/danmu.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/js/plugins/local_search.js","path":"js/plugins/local_search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-async/source/js/plugins/typing.js","path":"js/plugins/typing.js","modified":0,"renderable":1},{"_id":"source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":0},{"_id":"source/img/banner1.png","path":"img/banner1.png","modified":0,"renderable":0},{"_id":"source/img/banner2.jpg","path":"img/banner2.jpg","modified":0,"renderable":0},{"_id":"source/img/banner4.jpg","path":"img/banner4.jpg","modified":0,"renderable":0},{"_id":"source/img/banner6.jpg","path":"img/banner6.jpg","modified":0,"renderable":0},{"_id":"source/img/banner8.jpg","path":"img/banner8.jpg","modified":0,"renderable":0},{"_id":"source/img/banner_defalut.jpg","path":"img/banner_defalut.jpg","modified":0,"renderable":0},{"_id":"source/img/favicon1.png","path":"img/favicon1.png","modified":0,"renderable":0},{"_id":"source/img/banner3.jpg","path":"img/banner3.jpg","modified":0,"renderable":0},{"_id":"source/img/banner5.jpg","path":"img/banner5.jpg","modified":0,"renderable":0},{"_id":"source/img/banner7.jpg","path":"img/banner7.jpg","modified":0,"renderable":0},{"_id":"source/img/kestra_20250720.png","path":"img/kestra_20250720.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"8e7ebdadcbd7ab26a4d126e6bee69fa350f9eb12","modified":1768702456849},{"_id":"source/tags/index.md","hash":"8c1b0f736493b18fe5df89b0ddf63745c0387f5c","modified":1749901290578},{"_id":"source/categories/index.md","hash":"fd7d84b83abc22271390ac800ddda26e46565db8","modified":1749901216208},{"_id":"source/_data/languages.yml","hash":"84a43a5e8a37e2243512c6e305d9f935a4622beb","modified":1749871661842},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1749568715293},{"_id":"source/img/.DS_Store","hash":"96e15703003d89ce9174910c0b159d2488ee5bc9","modified":1750176680704},{"_id":"source/about/index.md","hash":"b0ed5266bf545428ad5aa4688198187d0e75a88a","modified":1749913569758},{"_id":"source/img/favicon1.png","hash":"77607907be0e0f32394f51c3a304fc5221ad5114","modified":1749885741080},{"_id":"source/_data/style/index.less","hash":"42989d3460bcae97c35b6578fda186f355c7a275","modified":1749931748265},{"_id":"node_modules/hexo-theme-async/package.json","hash":"70d57f9d44b0738d03b7e7138f6879bea1d81479","modified":1749568911970},{"_id":"node_modules/hexo-theme-async/languages/default.yml","hash":"243f1e303d7e180bfd462cd4bf35bc4ca1afae67","modified":1749568912078},{"_id":"node_modules/hexo-theme-async/README_zh-CN.md","hash":"f246ff5feb3963b40cfe49510afaf6947736ab5b","modified":1749568911982},{"_id":"node_modules/hexo-theme-async/plugins.yml","hash":"9e50cd335ae74447b66e7b855ef825c1ba9a5a14","modified":1749568912079},{"_id":"node_modules/hexo-theme-async/languages/zh-Hans.yml","hash":"82e14d9c19a28abe630205575961201269ea895a","modified":1749568912079},{"_id":"node_modules/hexo-theme-async/README.md","hash":"d6b4ce39a096a60b2aeecbc9f217fa5edfff8684","modified":1749568911985},{"_id":"node_modules/hexo-theme-async/_config.yml","hash":"3f7c49848256d20e2b11d30315718e106984411d","modified":1749568912078},{"_id":"node_modules/hexo-theme-async/layout/category.ejs","hash":"69d24101887c9d024fb1de2349794a516fb17ee2","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/layout/archive.ejs","hash":"2603f3bdf7cf68873e5128d45c2c518fad108837","modified":1749568911920},{"_id":"node_modules/hexo-theme-async/languages/en.yml","hash":"84a43a5e8a37e2243512c6e305d9f935a4622beb","modified":1749568912079},{"_id":"node_modules/hexo-theme-async/layout/about.ejs","hash":"fa4d733a809ddd086175d3445f94c8a9bd0362f6","modified":1749568911919},{"_id":"node_modules/hexo-theme-async/layout/layout.ejs","hash":"beb7634f08a8b364f4db166fc6eeb3ea064300d4","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/404.ejs","hash":"1416ba991457b267229bc4ec9f98540be1893d68","modified":1749568911917},{"_id":"node_modules/hexo-theme-async/layout/index.ejs","hash":"49342e779d1dd71df6285d73c755b3870cca1e80","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/layout/comment.ejs","hash":"277d6a650ec6d12973565f675da5172c2112413a","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/layout/links.ejs","hash":"c64b58b9bd84495682eadc8b06fe918f05d71da6","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/scripts/utils.js","hash":"c0f6d020f71a7751f1d2d2a727e8d811ae84cc6b","modified":1749568911970},{"_id":"node_modules/hexo-theme-async/layout/page.ejs","hash":"1a81e2a16d463f5f944ae3b79f444c2ac4de1ce0","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/custom.ejs","hash":"3e019f76171e8f4392942f512b53030ff268e2db","modified":1749568911923},{"_id":"node_modules/hexo-theme-async/layout/project.ejs","hash":"86acaced0704da2d4c4703616a83e696350459c7","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/post.ejs","hash":"1967b1062c872a7c0e3131aba78aaca7f65a0a18","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/tag.ejs","hash":"215d15d9b60dbf94115eaacbafddc20a34948659","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/source/failure.ico","hash":"5eec5c163400d8ece74286da49130da1ead3f6f6","modified":1749568911935},{"_id":"node_modules/hexo-theme-async/source/sw.js","hash":"01b07120762ab155c99478afb36075d4d7e2bc9c","modified":1749568911969},{"_id":"node_modules/hexo-theme-async/layout/_partial/footer.ejs","hash":"e3c44b9bd652f46e6e75ede77019102b00f303db","modified":1749568911923},{"_id":"node_modules/hexo-theme-async/layout/_partial/banner.ejs","hash":"a044ac4452808df3a779f75d8955593067484625","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/layout/_partial/head.ejs","hash":"44daee1120cf8f9b673e4cd5a44ff3c9c7e5247b","modified":1749568911924},{"_id":"node_modules/hexo-theme-async/layout/_partial/main.ejs","hash":"63cb1b7baa5b87ae89f15352925df99691c0f2f9","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/_partial/header.ejs","hash":"0409d9d28093ceaefcd6e8bd8d3f03553d8b00d0","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/layout/_third-party/cdn.ejs","hash":"964693a454808aa8277027ec3c5dda7f7af01255","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/layout/_partial/script.ejs","hash":"b7b588bd748add9e2a718e9684a67293b2de96c4","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/layout/_third-party/plugin.ejs","hash":"ce86e76f541f6c9b1856567e0bdd5ad24ce519a7","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/_widget/categorie.ejs","hash":"1752c7f055a81e4ad94cd65551f549b190adf17c","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/layout/_widget/header-logo.ejs","hash":"ad750aad202365e0c5d35f20bc3c7954f85c0573","modified":1749568911924},{"_id":"node_modules/hexo-theme-async/layout/_widget/about-card.ejs","hash":"eb5e8539844b28229a3d8bb26452e5800d976c2e","modified":1749568911918},{"_id":"node_modules/hexo-theme-async/layout/_third-party/sw.ejs","hash":"277f75522dffa7d985f3400f18b4f60861d2430d","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/layout/_widget/header-menu.ejs","hash":"a4a4884e1ad24da186df197fc0d9a75e6f4741c5","modified":1749568911924},{"_id":"node_modules/hexo-theme-async/layout/_widget/fixed-btn.ejs","hash":"7423a0638d27a7d980e7bcbc09c55761f37ff17d","modified":1749568911923},{"_id":"node_modules/hexo-theme-async/layout/_widget/header-search.ejs","hash":"de299cf96a8c7e546511a4196874d44b1db43b57","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/layout/_third-party/web-analytics.ejs","hash":"7d6a743d7c18ea619b01a7740db09a1c82945331","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/scripts/console/plugin.js","hash":"0af4b27cc86549826d24e1908da4aa9966debc14","modified":1749568911968},{"_id":"node_modules/hexo-theme-async/scripts/events/config.js","hash":"a2e274fef40ca8fb981b2f0cf09c7b1c727cc93e","modified":1749568911953},{"_id":"node_modules/hexo-theme-async/scripts/events/index.js","hash":"18b4e43ac08123bd27ee9619385a9e1d4a0fce0c","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/scripts/events/layout.js","hash":"b07fdc3448461ebe1e10288d0be5d5e616e99e1c","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/layout/_widget/header-theme.ejs","hash":"e3dd05bd47e62edc68a37ed17773211c234f2675","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/scripts/filters/cdn.js","hash":"b1030d8897da4bee5b66b1d669a2f5f4baee0e06","modified":1749568911952},{"_id":"node_modules/hexo-theme-async/scripts/filters/index.js","hash":"731a0527c291ba78a98f1fd270cc159789cd7d3f","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/scripts/helper/index.js","hash":"16a2b891096c41467eaeb8ece9648e213c8ce837","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/scripts/helper/async_config.js","hash":"e5fc3d52080164ae5ad6d61b2a9950469bbf402b","modified":1749568911952},{"_id":"node_modules/hexo-theme-async/scripts/helper/list_archives.js","hash":"7aac0c6da98350cbe28b648b2072a491594867a8","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/scripts/helper/list_categories.js","hash":"8a28147c2a0cce315746806673bf5db34fab82f6","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/scripts/tags/caniuse.js","hash":"45df24923a6f3d061f37fcbb953a7492594204f3","modified":1749568911952},{"_id":"node_modules/hexo-theme-async/scripts/helper/variable.js","hash":"b5912726f7015076f9671f3e24087c400c781db7","modified":1749568911970},{"_id":"node_modules/hexo-theme-async/scripts/helper/tag.js","hash":"718f7207db1e1b8db704d83893f2daffdef9278c","modified":1749568911969},{"_id":"node_modules/hexo-theme-async/scripts/helper/toc.js","hash":"7aefa488acf5abebe205d52e5908e88cf0e14d6e","modified":1749568911969},{"_id":"node_modules/hexo-theme-async/scripts/tags/flink.js","hash":"962f71341a117ab5ff67ec7a2d83125f0f4e7e7d","modified":1749568911953},{"_id":"node_modules/hexo-theme-async/scripts/tags/gallery.js","hash":"6aa14493096c10b73349b9d6f9ea70cfe65874b1","modified":1749568911953},{"_id":"node_modules/hexo-theme-async/scripts/tags/imgs.js","hash":"0db85bb9b42e0dc0c6ffbd019a7a9a87c7253d3e","modified":1749568911953},{"_id":"node_modules/hexo-theme-async/scripts/tags/note.js","hash":"24db43d8712bbaa6464675d5772c65226094833b","modified":1749568911955},{"_id":"node_modules/hexo-theme-async/scripts/tags/tabs.js","hash":"af6ca352d69cdd9d3ae0e0682b9ab5597fa15261","modified":1749568911969},{"_id":"node_modules/hexo-theme-async/layout/_widget/paginator.ejs","hash":"c7b76e443375b7d2bb15452b34ffcc654105db1f","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/_widget/post-toc.ejs","hash":"c0355e8fb5067bb36976c6a6c587b9393418e861","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/_widget/search.ejs","hash":"573c500a4ecb65b822b3a34168dbcf446c92bc0f","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1749568911942},{"_id":"node_modules/hexo-theme-async/source/img/favicon.svg","hash":"ef922eea66dc950fb1327dd4571d777b8aeb8161","modified":1749568912030},{"_id":"node_modules/hexo-theme-async/source/img/block.jpg","hash":"1dd350354bd3fe2e7287dfe063d7783e4ab91090","modified":1749568911951},{"_id":"node_modules/hexo-theme-async/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1749568911934},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/category.ejs","hash":"00082fc6b67937339416971a201ad3121d30796e","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/source/css/index.less","hash":"816ae0181de8239b1487fa89480bce36abb794cd","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/index.ejs","hash":"19d539a157993bd92ec61db15cf4f6c8fefbbe11","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/source/js/main.js","hash":"72a9315d0c05eaaeab2d34d5ca8f76680e73a0b5","modified":1749568911955},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/archive.ejs","hash":"777b20cf888f43e7c0b1dddae2db576c359681c1","modified":1749568911919},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/links.ejs","hash":"9d2815f78de8a5c2d1f8d3cae70fb133cff90c80","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/project.ejs","hash":"afdd4092f92dcd2dc8cb79aba2b214a9d209b1a6","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/about.ejs","hash":"47d2232ac1e20fc29a358c6a66f871ca2ee4c215","modified":1749568911919},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/tag.ejs","hash":"b827961b3a394ab4952508b2e8f8fd2a58a143de","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/source/img/avatar.jpg","hash":"e9e4108ab199202288ee68342a40064649c3d7c1","modified":1749568911948},{"_id":"node_modules/hexo-theme-async/layout/_partial/page/post.ejs","hash":"b55db31dacc274339a1b20a6659fb85bf884ea3a","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/post-content.ejs","hash":"2cb43a1657dfcff799f67d8e06c31d4c9b571bca","modified":1749568911927},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/post-card-mini.ejs","hash":"e7a47f33c24943229e423ab7b367973a2a014d24","modified":1749568911927},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/post-card.ejs","hash":"9f12b489d174d9df83d1bef35f7a29c337b2d49a","modified":1749568911927},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/post-info.ejs","hash":"18b2d5d78d36fe1c265eb9c4c6aa285e38626886","modified":1749568911927},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/post-next-prev.ejs","hash":"81920ae69da586274c742e1a6467b3a0145064b9","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/post-copyright.ejs","hash":"c2f0b1c2f9a4fbcf664b418f5ef1f98630d446d8","modified":1749568911927},{"_id":"node_modules/hexo-theme-async/layout/_partial/post/reward.ejs","hash":"664c43ab7346d700d942e30d2a5bdd119743c647","modified":1749568911928},{"_id":"node_modules/hexo-theme-async/layout/_partial/preloader/change-mode-preloader.ejs","hash":"8a6019defee71021eb9bd46549c8a4479546ec9d","modified":1749568911922},{"_id":"node_modules/hexo-theme-async/layout/_third-party/comment/b-comments.ejs","hash":"398c4769c6bb945844e02fdbaddab501afbfc33f","modified":1749568911920},{"_id":"node_modules/hexo-theme-async/layout/_third-party/comment/giscus.ejs","hash":"1ea620f2e4473246272ec7e9f27f8c82f7a5f48e","modified":1749568911924},{"_id":"node_modules/hexo-theme-async/layout/_partial/sidebar/index.ejs","hash":"bbdebed5b66650db2eb295491c6b4be1a3ef28c8","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/layout/_third-party/comment/index.ejs","hash":"bac629e4c8d28cc16720c17d526e0b9fc7059be3","modified":1749568911925},{"_id":"node_modules/hexo-theme-async/layout/_partial/preloader/page-preloader.ejs","hash":"a1ce51be9b477e146dcc3bb4fbe9628c1471969e","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/source/css/_variables/index.less","hash":"25061e189684118fbb5ce9e4119f60e331968065","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/layout/_third-party/seo/baidu-push.ejs","hash":"2e3d405b5973c5ceed9cc24a5591240c0345cb94","modified":1749568911921},{"_id":"node_modules/hexo-theme-async/source/css/plugins/bootstrap.row.css","hash":"d06c09ad9e0e351893cb2503e54f9b19f821f540","modified":1749568911910},{"_id":"node_modules/hexo-theme-async/layout/_third-party/comment/twikoo.ejs","hash":"4a0aba54594f6692cf11f756ecac2dfb738bcdf6","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/source/css/plugins/font-awesome.min.css","hash":"6137a9883adce70d78c7f7bbe8af27d91b627d32","modified":1749568911912},{"_id":"node_modules/hexo-theme-async/source/css/_components/banner.less","hash":"1c4eda54af31014ba8d5f8d845ccae34001e3061","modified":1749568911970},{"_id":"node_modules/hexo-theme-async/source/css/_components/app-frame.less","hash":"888dce7b284a2d2a4cf67e67a76461c0fb1612c8","modified":1749568911970},{"_id":"node_modules/hexo-theme-async/source/css/_components/base.less","hash":"104dab42cb06584989f266765e0d19f38f754553","modified":1749568911970},{"_id":"node_modules/hexo-theme-async/source/fonts/webfonts/fa-regular-400.woff2","hash":"fbb0d9d51850d824d7eba66e0e210c778d6d42f5","modified":1749568912051},{"_id":"node_modules/hexo-theme-async/source/css/_components/blockquote.less","hash":"50ba46440e2b59c2d6c3486924ba4d1d16ca7547","modified":1749568911971},{"_id":"node_modules/hexo-theme-async/source/css/_components/btn.less","hash":"eefe6b747d9ab02d5a5b24523994d974e50e62ca","modified":1749568911971},{"_id":"node_modules/hexo-theme-async/source/css/_components/footer.less","hash":"c393ebf29473130907f19b94a2e78581610772d6","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/index.less","hash":"6e4233951d5960eb7019aff0fecce9918ac4af91","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/fixed-btn.less","hash":"eee667056b0c2a5432defb26202e230a300aedc4","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/form.less","hash":"3e266bafb5423d5a1ca8dd985167694c2e950b1e","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/list.less","hash":"f3d810a84e47272828455362703d283b0d4b3997","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/source/css/_components/card.less","hash":"7509c0dfe9755006ecfe2c07dad47730878c0b3f","modified":1749568911971},{"_id":"node_modules/hexo-theme-async/source/css/_components/menu.less","hash":"75bfe8fb8a1e667bbcb7319f3446ae730bce51ef","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/source/css/_components/preloader.less","hash":"bdf095448437bd711792dc60ac1c3aca147dadd1","modified":1749568911977},{"_id":"node_modules/hexo-theme-async/source/css/_components/mode-switcher.less","hash":"278b5a4d32df86717cd6564385d71ba8db39b037","modified":1749568911977},{"_id":"node_modules/hexo-theme-async/source/css/_components/pagination.less","hash":"c31230e3f8b989ecd7fd360de5617ce7203d1b3b","modified":1749568911977},{"_id":"node_modules/hexo-theme-async/source/css/_components/message.less","hash":"3be2072551fe6064afb994a39620a135c09c156d","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/source/css/_components/timeline.less","hash":"e6e7b4bac39298e5d00031b0ea99313f6adcc127","modified":1749568911980},{"_id":"node_modules/hexo-theme-async/source/css/_components/title-divider.less","hash":"67d38725dcc5910f5283a01f4cffe46042a3cc67","modified":1749568911981},{"_id":"node_modules/hexo-theme-async/source/css/_components/tag-plugins.less","hash":"02e0e9dc97449014c14d05483d860a3bb206ed3e","modified":1749568911980},{"_id":"node_modules/hexo-theme-async/source/css/_components/toc.less","hash":"c6b0c29537f37506b74c432a5a3cbfa2f8182dfb","modified":1749568911981},{"_id":"node_modules/hexo-theme-async/source/css/_components/video.less","hash":"62a48f016c23f23aec13062b0241feb702fb6a85","modified":1749568911982},{"_id":"node_modules/hexo-theme-async/source/js/plugins/danmu.js","hash":"872bf0ed19608d130bed4a2ef42119681603ab9c","modified":1749568911953},{"_id":"node_modules/hexo-theme-async/source/js/plugins/local_search.js","hash":"7fe911937bd357f4236aabd8d43ae486bad8cd8e","modified":1749568911954},{"_id":"node_modules/hexo-theme-async/source/js/plugins/typing.js","hash":"49e5af4f80da9bfd46a81495711822de87719656","modified":1749568911969},{"_id":"node_modules/hexo-theme-async/source/css/_components/publication.less","hash":"87d16ff0a4c85ae5284f7128663d4f4e7731ee5e","modified":1749568911977},{"_id":"node_modules/hexo-theme-async/layout/_partial/sidebar/card/email.ejs","hash":"d8ceed83ba3b0af7d361ca9254a62afd6e8f741e","modified":1749568911923},{"_id":"node_modules/hexo-theme-async/source/css/_components/top-bar.less","hash":"805fedd1c19271f024497f34c0debe027d9d1ea5","modified":1749568911981},{"_id":"node_modules/hexo-theme-async/layout/_partial/sidebar/card/info.ejs","hash":"dfa5d015d7174ad02df0099dadfab3e35e85dd59","modified":1749568911926},{"_id":"node_modules/hexo-theme-async/layout/_partial/sidebar/card/social.ejs","hash":"4543c52a486a87f718fcfe03b6ef59bd771759d5","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/layout/_partial/sidebar/card/user.ejs","hash":"e883b30653e848ccd2e4697af18201aaa167445e","modified":1749568911929},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/comment/twikoo.less","hash":"cb7d1a04b997a5d55bbd8eef351b2c5822e771da","modified":1749568911981},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/comment/bcomments.less","hash":"2a42ff8315ae2788421111b30c00755bdcac8497","modified":1749568911971},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/minix.less","hash":"d406de6ef930380b9e1f94aabcd3c42ae092c8ef","modified":1749568911976},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/theme.less","hash":"a29e8c7c05663d074f4441e28361dc8d261e854f","modified":1749568911980},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/index.less","hash":"2c87ceca6a2642d6d4a31f6a6e293c54fb9494e9","modified":1749568911974},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/index.less","hash":"16629604ef46d58f80f5b89bd188817f3961634a","modified":1749568911974},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/comment/index.less","hash":"0460c4f8b74cca3a8e0856772a4008aae301fc01","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/read-mode/index.less","hash":"1e3da7b7eff2c38c5939f41e2ce85f98ffb7f527","modified":1749568911974},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/fancybox/index.less","hash":"320806390e7e78dee470350c503a8d89e651ddb8","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/read-mode/single-column.less","hash":"72e2a6e8165128abb02127aef6b90441aeb92f9e","modified":1749568911979},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/reward/index.less","hash":"519f7bb569b1fa5185f839592e58ab5ba7b88dbe","modified":1749568911974},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/search/index.less","hash":"120696c464c600fc43c7974e0d5ff8f5de1b9366","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/highlight/index.less","hash":"bc02b3c4fed5f61e7182b73b7364fd5528d59fbe","modified":1749568911973},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/search/search.less","hash":"c04623b8102f806c0c140481424decad9edd5ec3","modified":1749568911978},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/prismjs/index.less","hash":"54da8eddcddef000713468025443498b72ee4b86","modified":1749568911974},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/read-mode/read-mode.less","hash":"0906dcdfa3bfe1b68ff6b0316ae3df2364c3d334","modified":1749568911977},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/reward/reward.less","hash":"cf7a4f869b869830c38a0fad3c1be30d8d33b17a","modified":1749568911978},{"_id":"source/img/banner4.jpg","hash":"bc1fc1e32a154c6be9f5ef40b2c682b5206c6484","modified":1749895705445},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/highlight/diff.less","hash":"d6b8be31a7c8ba8cd676cc039786673cf0b6eccc","modified":1749568911972},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/prismjs/diff.less","hash":"1da7d603b515e02305951456dcb8b8ddf6e322f3","modified":1749568911972},{"_id":"node_modules/hexo-theme-async/source/css/_components/plugins/highlight/prismjs/line-number.less","hash":"9bd2cce0c88408f64f5712d076542b623a270ab7","modified":1749568911975},{"_id":"node_modules/hexo-theme-async/source/fonts/webfonts/fa-solid-900.woff2","hash":"80644191098f863f25be27841c0d92c452cf2327","modified":1749568912076},{"_id":"node_modules/hexo-theme-async/source/fonts/webfonts/fa-brands-400.woff2","hash":"f988b2efe9434b0af28943708d33dd3afad9a5ba","modified":1749568912050},{"_id":"node_modules/hexo-theme-async/source/css/plugins/bootstrap.min.css","hash":"b6f019002b87e86a07275eacd3c35a13c378b5c3","modified":1749568911907},{"_id":"node_modules/hexo-theme-async/source/img/banner.png","hash":"1fc9c8d054e401d68788027107c9392f047aa5fa","modified":1749568912030},{"_id":"source/img/avatar.png","hash":"b7d17a1869949d3b8b541e07dd45725f9358148c","modified":1749903712030},{"_id":"source/img/banner7.jpg","hash":"6dda27b0a08be29752679e4f8ae17bd3b4ee4844","modified":1749896964713},{"_id":"source/img/banner8.jpg","hash":"0e60edeabd1d16c6df75f44e6ea40a1110d83b95","modified":1749896971672},{"_id":"source/img/banner3.jpg","hash":"76b37ee576a8f8b049fe4edde726f666fa50d599","modified":1749895442217},{"_id":"source/img/banner_defalut.jpg","hash":"b9b9c4fe02000a3b264808f41bcb1a759cdb7e77","modified":1749895650838},{"_id":"source/img/banner1.png","hash":"b84635f04cc5c4e9f0e7f7197f31689f84cb6e42","modified":1749894512697},{"_id":"source/img/banner5.jpg","hash":"84d41d5954f149d1c1f770acac8cc5dc8952286d","modified":1749896840506},{"_id":"source/img/banner2.jpg","hash":"b33e258af86a3d99d167d94e84ddbdfb461b1b66","modified":1749896024592},{"_id":"source/img/banner6.jpg","hash":"ae239cff22f469ba6e1fab75a1fc05ee4968232f","modified":1749897059956},{"_id":"source/_posts/kestra-use-tutorial.md","hash":"6f05f3b88dc474938ad8bdb37fdace013629de5a","modified":1753012189269},{"_id":"source/img/kestra_20250720.png","hash":"29956207beecb5dbab5c18b1561463e320fc92dc","modified":1753012364877},{"_id":"source/_posts/Deploy Kestra on a Lightweight k3d (k3s) Cluster.md","hash":"ac38d6c6ea6a2aeba575e2b34313885edcbe121b","modified":1768702527187}],"Category":[{"name":"Workflows Orchestration","_id":"cmkj405lz0001xu08bps9c069"}],"Data":[{"_id":"languages","data":{"site":{"title":"Site Information","webmaster":"Webmaster","domain":"Domain","avatar":"Avatar","describe":"Describe","rule_text":"Friend chain requirements"},"sidebar":{"residence":"Residence","city":"City","age":"Age","contact":"Contact Me"},"footer":{"powered":"Powered by %s","theme":"Theme","tips":"The blog has been lovely to run %s day","day":"day","hour":"hour","minute":"minute","seconds":"seconds"},"title":{"links":"Friendly Link","new_publish":"Newest Publications","comment":"Message","author":"Author","blog":"Blog Application","privacy":"Privacy and Comments","more":"Read More","all_archives":"All Archives","year_archives":"Archive for %s","other_articles":"Other Articles","unclassified":"Unclassified"},"menu":{"home":"Home","archives":"Archives","links":"Links","about":"About"},"favicon":{"show_text":"(/≧▽≦/)Hey! Good again!","hide_text":"(●—●)Oh, crash!"},"search":{"placeholder":"Searching...","result_placeholder":"Please enter keywords to search","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"reward":{"comment":"I'm so cute. Please give me money."},"post":{"sticky":"TOP","read_more":"READ MORE","copyright":{"author":"Post author","link":"Post link","license_title":"Copyright Notice","license_content":"All articles in this blog are licensed under %s unless otherwise stated."},"copy":{"success":"Copied","failure":"Copy failed"},"read_mode":{"open":"Enter reading mode","exit":"Exit reading mode"},"notice_outdate_message":"It has been %s days since the last update, the content of the article may be outdated.","toc":"Article table of contents"},"rightside":{"toc_title":"Open toc","readmode_title":"Read Mode","back_to_top":"Back To Top","aside":"Toggle between single-column and double-column"},"date_suffix":{"just":"Just","min":"minutes ago","hour":"hours ago","day":"days ago","month":"months ago"},"symbol":{"comma":", ","period":". ","colon":": "},"ieTips":"For a better experience, use a browser other than Internet Explorer","not_found":{"name":"HOME","text":"The requested page does not exist. The method of arrival is unknown, but you can click the button below to navigate back to the homepage."}}},{"_id":"style/index","data":":root {\n  --primary: #679fde;\n  --primary-70: rgba(103, 159, 222, 0.7);\n  --primary-50: rgba(103, 159, 222, 0.5);\n  --primary-30: rgba(103, 159, 222, 0.3);\n  --primary-weak: #53aee8;\n  --primary-weak-50: rgba(83, 174, 232, 0.5);\n  --body-color: #556978;\n  --body-color-5: rgba(85, 105, 120, 0.05);\n  --body-bg-color: #00151f;\n  --theme-color: #00283a;\n  --theme-bg-color: #e0f1f0;\n  --theme-bg-color-80: rgba(224, 241, 240, 0.8);\n  --theme-bg2-color: #dbfaf8;\n  --box-shadow: 1px 2px 4px -2px rgba(0, 0, 0, 0.15);\n  --box-shadow-hover: 2px 2px 4px -2px #797979ab;\n  --border-dotted: dotted 2px rgba(225, 225, 235, 0.9);\n  --preloader-background: #00283a;\n  --top-bar-box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.15);\n  --card-padding: 40px;\n  --card-bottom-card: 40px;\n  --card-border-radius: 10px;\n  --card-top-color: #ffffff;\n  --card-top-bg-color: #ff6a00;\n  --card-cover-bg-color: #e9e9e9;\n  --tabele-thead-bg-color: rgba(153, 169, 191, 0.1);\n  --tabele-thead-border-color: #eee;\n  --tab-border-color: #f1f1f1;\n  --tab-botton-bg-color: #f1f1f1;\n  --tab-botton-color: #7b7b7d;\n  --tab-button-hover-bg-color: #eeeeee;\n  --tab-button-active-bg-color: #ffffff;\n  --fixed-button-bg-color: #ffffff;\n  --fixed-button-color: #7b7b7d;\n  --code-bg-color: #f1f1f1;\n  --code-color: #476582;\n  --notice-outdate-bg: #ffe6e6;\n  --notice-outdate-color: #ff6666;\n  --notice-outdate-border: #ff8080;\n  --scroll-progress-bg-color: linear-gradient(#ffdddd, #e9ddff);\n  --note-info-bg-color: #65758529;\n  --note-tip-bg-color: #646cff29;\n  --note-warning-bg-color: #eab30829;\n  --note-danger-bg-color: #f43f5e29;\n  --selection-bg-color: #1f2d3d;\n  --selection-color: #f1f1f1;\n}\n:root.dark {\n  --primary: #0d898b;\n  --primary-70: rgba(13, 137, 139, 0.7);\n  --primary-50: rgba(13, 137, 139, 0.5);\n  --primary-30: rgba(13, 137, 139, 0.3);\n  --primary-weak: #59c3c0;\n  --primary-weak-50: rgba(89, 195, 192, 0.5);\n  --body-color: #d1d9e9b3;\n  --body-color-5: rgba(209, 217, 233, 0.05);\n  --body-bg-color: #00151f;\n  --theme-color: #dedee0;\n  --theme-bg-color: #00283a;\n  --theme-bg-color-80: rgba(0, 40, 58, 0.8);\n  --theme-bg2-color: #02162b;\n  --box-shadow: 0 2px 4px -2px rgba(0, 0, 0, 0.6);\n  --box-shadow-hover: 2px 2px 4px -2px #282828fc;\n  --border-dotted: dotted 2px rgba(225, 225, 235, 0.15);\n  --preloader-background: #dedee0;\n  --top-bar-box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.6);\n  --card-cover-bg-color: #162e38;\n  --tabele-thead-bg-color: #525f663d;\n  --tabele-thead-border-color: #ffffff1c;\n  --tab-border-color: #063c54;\n  --tab-botton-bg-color: #063c54;\n  --tab-botton-color: #dedee0;\n  --tab-button-hover-bg-color: #003146;\n  --tab-button-active-bg-color: #042838;\n  --fixed-button-bg-color: #063c54;\n  --fixed-button-color: #dedee0;\n  --code-bg-color: #3a3a3a;\n  --code-color: #c9def1;\n  --notice-outdate-bg: #403131;\n  --notice-outdate-color: #ff6565;\n  --notice-outdate-border: #bb1e1e;\n  --scroll-progress-bg-color: linear-gradient(#82df7a80, #82df7a80);\n  --selection-bg-color: #f1f1f1;\n  --selection-color: #1f2d3d;\n}\n/* @media (prefers-color-scheme: dark) {\n    :root {\n        .dark()\n    }\n} */\n@media (max-width: 768px) {\n  :root {\n    --card-padding: 20px;\n    --card-bottom-card: 10px;\n    --card-border-radius: 6px;\n  }\n  :root blockquote:before {\n    top: 0;\n  }\n}\n"}],"Page":[{"title":"标签","date":"2019-11-16T02:46:27.000Z","layout":"tag","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2019-11-16 10:46:27\nlayout: tag\n---\n","updated":"2025-06-14T11:41:30.578Z","path":"tags/index.html","comments":1,"_id":"cmdbkdggv0000oxh77zjk9xmh","content":"","excerpt":"","more":""},{"title":"分类","date":"2019-11-16T02:46:27.000Z","layout":"category","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2019-11-16 10:46:27\nlayout: category\n---\n","updated":"2025-06-14T11:40:16.208Z","path":"categories/index.html","comments":1,"_id":"cmdbkdggx0001oxh73extgx78","content":"","excerpt":"","more":""},{"title":"关于","layout":"about","_content":"","source":"about/index.md","raw":"---\ntitle: 关于\nlayout: about\n---\n","date":"2025-06-14T15:06:09.758Z","updated":"2025-06-14T15:06:09.758Z","path":"about/index.html","comments":1,"_id":"cmdbkdggx0002oxh7a4zj5d7r","content":"","excerpt":"","more":""}],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2025-06-10T15:18:35.293Z","updated":"2025-06-10T15:18:35.293Z","comments":1,"layout":"post","photos":[],"_id":"cmdbkdgh60003oxh7htytgide","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"Deploy Kestra on a Lightweight k3d (k3s) Cluster","date":"2025-07-20T11:06:28.000Z","cover":"/img/kestra_20250720.png","_content":"# Deploy Kestra on a Lightweight k3d (k3s) Cluster — A Practical Guide\n\nThis post shows a simple, developer-friendly way to run **Kestra** on a **local k3d (k3s) Kubernetes cluster** powered by **Docker Desktop**. We’ll also cover a very common pain point: **using your own local Docker images** inside Kestra workflows when the **Docker task runner (DinD)** is involved.\n\n---\n\n## What you’ll get\n\nBy the end, you will have:\n\n* A k3d cluster with a **built-in local container registry**\n* A **PostgreSQL** database (Kestra metadata store) exposed via **NodePort**\n* **Kestra** installed via Helm and reachable from your laptop\n* A clear solution for **running workflows with Docker images stored in your local registry**\n\n---\n\n## Prerequisites\n\nMake sure you have:\n\n* Docker Desktop\n* `k3d`\n* `kubectl`\n* `helm`\n* `jq` (for patching the DinD container args)\n\n---\n\n## 1) Create a k3d cluster with a local registry\n\nCreate the cluster and let k3d create a local registry for you:\n\n```bash\nk3d cluster create kestra --registry-create kestra-registry\n```\n\nWhat this does (good news: you don’t need to do these manually):\n\n* Creates a local registry container (e.g. `k3d-kestra-registry`)\n* Connects the registry to the cluster network\n* Writes the correct registry config for k3s/containerd\n* Registry listens on **5000 inside the cluster**, and is mapped to a **random host port** on your machine\n\nFind the registry’s exposed host port:\n\n```bash\ndocker ps -f name=kestra-registry\n```\n\nExample: if you see host port `58046`, that’s what you’ll push to.\n\n---\n\n## 2) Push your custom image into the local registry\n\nAssume you built an image locally: `kestra-dev:latest`. Tag and push it to the registry:\n\n```bash\ndocker tag kestra-dev:latest localhost:58046/kestra-dev:latest\ndocker push localhost:58046/kestra-dev:latest\n```\n\nInside the cluster, it will be referenced as:\n\n```yaml\nimage: kestra-registry:5000/kestra-dev:latest\nimagePullPolicy: IfNotPresent\n```\n\nBecause `kestra-registry:5000` is the **in-cluster registry address**.\n\n### Quick verification: can Kubernetes run the image?\n\n```bash\nkubectl run test-registry \\\n  --image=kestra-registry:5000/kestra-dev:latest \\\n  --restart=Never --command -- tail -f /dev/null\n\nkubectl describe pod test-registry\n```\n\nIf the Pod becomes `Running`, your registry is working.\n\n---\n\n## 3) Install PostgreSQL (Kestra metadata DB) via Helm\n\nWe’ll install Bitnami PostgreSQL and expose it with NodePort `30432`.\n\n```bash\nmkdir -p charts && cd charts\nhelm repo add bitnami https://charts.bitnami.com/bitnami || true\nhelm repo update\nhelm pull bitnami/postgresql --untar\ncd ..\n\nNS=default\nhelm upgrade --install alfredx-postgresql ./charts/postgresql -n $NS \\\n  --set auth.username=alfredx \\\n  --set auth.password='YOUR_PASSWORD' \\\n  --set auth.database=kestra \\\n  --set primary.service.type=NodePort \\\n  --set primary.service.nodePorts.postgresql=30432 \\\n  --set primary.service.ports.postgresql=5432\n```\n\nThis matches a known-working setup: service is NodePort, `port: 5432`, `nodePort: 30432`.\n\nCheck status:\n\n```bash\nkubectl get pods -n default -w\nkubectl get svc alfredx-postgresql -n default -o wide\n```\n\n---\n\n## 4) (Optional) Map ports from the k3d cluster to your host\n\nIf you want to reach NodePorts via `localhost:<nodePort>` on your laptop, you can **add port mappings** to an existing cluster (experimental, but handy):\n\n```bash\nk3d cluster edit kestra --port-add 30432:30432@server:0\nk3d cluster edit kestra --port-add 30080:30080@server:0\nk3d cluster edit kestra --port-add 30081:30081@server:0\n```\n\n---\n\n## 5) Install Kestra via Helm\n\n### 5.1 Create required Kubernetes secrets (example)\n\nCreate secrets that your flows may need (S3 credentials in this example). **Do not commit real keys**—use your own secret values:\n\n```bash\nkubectl create secret generic s3-credentials -n default \\\n  --from-literal=AWS_ACCESS_KEY_ID='YOUR_KEY' \\\n  --from-literal=AWS_SECRET_ACCESS_KEY='YOUR_SECRET'\n```\n\n(Your original notes show this exact pattern. )\n\n### 5.2 Install Kestra\n\n```bash\nhelm upgrade --install alfredx kestra/kestra -f values.yaml -n default\nkubectl get pods -n default -w\n```\n\n### 5.3 Expose Kestra service via NodePort\n\nExpose:\n\n* UI/API: `30080 -> 8080`\n* Management: `30081 -> 8081`\n\n```bash\nkubectl patch svc alfredx-kestra -n default -p '{\n  \"spec\": {\n    \"type\": \"NodePort\",\n    \"ports\": [\n      {\"name\":\"http\",\"port\":8080,\"protocol\":\"TCP\",\"targetPort\":8080,\"nodePort\":30080},\n      {\"name\":\"management\",\"port\":8081,\"protocol\":\"TCP\",\"targetPort\":8081,\"nodePort\":30081}\n    ]\n  }\n}'\n```\n\nNow you can typically open:\n\n* `http://localhost:30080` (Kestra UI)\n\n---\n\n## 6) The “local image + Docker runner (DinD)” trap — and how to fix it\n\nIf you run tasks with the **Docker task runner**, Kestra often uses **DinD (Docker-in-Docker)**. Important consequence:\n\n> DinD is its own Docker daemon. It does **not** automatically use the node’s image cache or registry settings.\n\nSo even if Kubernetes can pull `kestra-registry:5000/...`, your workflow may fail because DinD tries to use **HTTPS** by default or doesn’t trust your HTTP registry.\n\nYou typically need two fixes:\n\n### Fix A — Make k3s/containerd treat the registry as HTTP\n\nWrite `/etc/rancher/k3s/registries.yaml` inside the k3d node:\n\n```bash\ndocker exec -it k3d-kestra-server-0 sh -lc '\nmkdir -p /etc/rancher/k3s && cat > /etc/rancher/k3s/registries.yaml << \"EOF\"\nmirrors:\n  \"kestra-registry:5000\":\n    endpoint:\n      - \"http://kestra-registry:5000\"\n\nconfigs:\n  \"kestra-registry:5000\":\n    tls:\n      insecure_skip_verify: true\nEOF\ncat /etc/rancher/k3s/registries.yaml\n'\n```\n\nIf you have agent nodes, apply the same change there too.\n\n### Fix B — Tell Kestra’s Docker runner (DinD) to trust the registry (HTTP)\n\nYou have three practical options.\n\n#### Option 1: Set it per task (most direct)\n\n```yaml\ntasks:\n  - id: my_task\n    type: io.kestra.plugin.scripts.shell.Commands\n    containerImage: kestra-registry:5000/kestra-dev:latest\n    taskRunner:\n      type: io.kestra.plugin.scripts.runner.docker.Docker\n      config: |\n        {\n          \"insecure-registries\": [\"kestra-registry:5000\"]\n        }\n    commands:\n      - echo \"it works\"\n```\n\n#### Option 2: Set it globally in Kestra config (applies to all Docker tasks)\n\n```yaml\nplugins:\n  configurations:\n    - type: io.kestra.plugin.scripts.runner.docker.Docker\n      values:\n        insecure-registries:\n          - kestra-registry:5000\n```\n\n#### Option 3: Patch the DinD container args (durable “cluster-level” fix)\n\nAutomatically locate the DinD container index and append an insecure-registry arg:\n\n```bash\nIDX=$(kubectl get deploy -n default alfredx-kestra-worker -o json \\\n  | jq -r '.spec.template.spec.containers\n           | to_entries[]\n           | select(.value.name==\"kestra-worker-docker-dind\")\n           | .key')\n\nkubectl patch deploy -n default alfredx-kestra-worker --type='json' -p=\"[\n  {\\\"op\\\":\\\"add\\\", \\\"path\\\":\\\"/spec/template/spec/containers/${IDX}/args/-\\\",\n   \\\"value\\\":\\\"--insecure-registry=kestra-registry:5000\\\"}\n]\"\n```\n\nThen verify:\n\n```bash\nNEWPOD=$(kubectl get pod -n default -l app.kubernetes.io/component=worker -o jsonpath='{.items[0].metadata.name}')\nkubectl exec -it -n default \"$NEWPOD\" -c kestra-worker-docker-dind -- sh -lc '\ndocker info | sed -n \"/Insecure Registries/,\\$p\"\n'\n```\n\nYou should see `kestra-registry:5000` under *Insecure Registries*.\n\n---\n\n## Suggested “daily workflow” for iterating images\n\nWhenever your task image changes:\n\n```bash\ndocker build -t kestra-dev:latest .\ndocker tag kestra-dev:latest localhost:58046/kestra-dev:latest\ndocker push localhost:58046/kestra-dev:latest\n```\n\nThe cluster will pick up the updated image from the local registry.\n","source":"_posts/Deploy Kestra on a Lightweight k3d (k3s) Cluster.md","raw":"---\ntitle: Deploy Kestra on a Lightweight k3d (k3s) Cluster\ndate: 2025-07-20 19:06:28\ncover: /img/kestra_20250720.png\ncategory: \n  - Workflows Orchestration\ntags: \n  - Kestra\n---\n# Deploy Kestra on a Lightweight k3d (k3s) Cluster — A Practical Guide\n\nThis post shows a simple, developer-friendly way to run **Kestra** on a **local k3d (k3s) Kubernetes cluster** powered by **Docker Desktop**. We’ll also cover a very common pain point: **using your own local Docker images** inside Kestra workflows when the **Docker task runner (DinD)** is involved.\n\n---\n\n## What you’ll get\n\nBy the end, you will have:\n\n* A k3d cluster with a **built-in local container registry**\n* A **PostgreSQL** database (Kestra metadata store) exposed via **NodePort**\n* **Kestra** installed via Helm and reachable from your laptop\n* A clear solution for **running workflows with Docker images stored in your local registry**\n\n---\n\n## Prerequisites\n\nMake sure you have:\n\n* Docker Desktop\n* `k3d`\n* `kubectl`\n* `helm`\n* `jq` (for patching the DinD container args)\n\n---\n\n## 1) Create a k3d cluster with a local registry\n\nCreate the cluster and let k3d create a local registry for you:\n\n```bash\nk3d cluster create kestra --registry-create kestra-registry\n```\n\nWhat this does (good news: you don’t need to do these manually):\n\n* Creates a local registry container (e.g. `k3d-kestra-registry`)\n* Connects the registry to the cluster network\n* Writes the correct registry config for k3s/containerd\n* Registry listens on **5000 inside the cluster**, and is mapped to a **random host port** on your machine\n\nFind the registry’s exposed host port:\n\n```bash\ndocker ps -f name=kestra-registry\n```\n\nExample: if you see host port `58046`, that’s what you’ll push to.\n\n---\n\n## 2) Push your custom image into the local registry\n\nAssume you built an image locally: `kestra-dev:latest`. Tag and push it to the registry:\n\n```bash\ndocker tag kestra-dev:latest localhost:58046/kestra-dev:latest\ndocker push localhost:58046/kestra-dev:latest\n```\n\nInside the cluster, it will be referenced as:\n\n```yaml\nimage: kestra-registry:5000/kestra-dev:latest\nimagePullPolicy: IfNotPresent\n```\n\nBecause `kestra-registry:5000` is the **in-cluster registry address**.\n\n### Quick verification: can Kubernetes run the image?\n\n```bash\nkubectl run test-registry \\\n  --image=kestra-registry:5000/kestra-dev:latest \\\n  --restart=Never --command -- tail -f /dev/null\n\nkubectl describe pod test-registry\n```\n\nIf the Pod becomes `Running`, your registry is working.\n\n---\n\n## 3) Install PostgreSQL (Kestra metadata DB) via Helm\n\nWe’ll install Bitnami PostgreSQL and expose it with NodePort `30432`.\n\n```bash\nmkdir -p charts && cd charts\nhelm repo add bitnami https://charts.bitnami.com/bitnami || true\nhelm repo update\nhelm pull bitnami/postgresql --untar\ncd ..\n\nNS=default\nhelm upgrade --install alfredx-postgresql ./charts/postgresql -n $NS \\\n  --set auth.username=alfredx \\\n  --set auth.password='YOUR_PASSWORD' \\\n  --set auth.database=kestra \\\n  --set primary.service.type=NodePort \\\n  --set primary.service.nodePorts.postgresql=30432 \\\n  --set primary.service.ports.postgresql=5432\n```\n\nThis matches a known-working setup: service is NodePort, `port: 5432`, `nodePort: 30432`.\n\nCheck status:\n\n```bash\nkubectl get pods -n default -w\nkubectl get svc alfredx-postgresql -n default -o wide\n```\n\n---\n\n## 4) (Optional) Map ports from the k3d cluster to your host\n\nIf you want to reach NodePorts via `localhost:<nodePort>` on your laptop, you can **add port mappings** to an existing cluster (experimental, but handy):\n\n```bash\nk3d cluster edit kestra --port-add 30432:30432@server:0\nk3d cluster edit kestra --port-add 30080:30080@server:0\nk3d cluster edit kestra --port-add 30081:30081@server:0\n```\n\n---\n\n## 5) Install Kestra via Helm\n\n### 5.1 Create required Kubernetes secrets (example)\n\nCreate secrets that your flows may need (S3 credentials in this example). **Do not commit real keys**—use your own secret values:\n\n```bash\nkubectl create secret generic s3-credentials -n default \\\n  --from-literal=AWS_ACCESS_KEY_ID='YOUR_KEY' \\\n  --from-literal=AWS_SECRET_ACCESS_KEY='YOUR_SECRET'\n```\n\n(Your original notes show this exact pattern. )\n\n### 5.2 Install Kestra\n\n```bash\nhelm upgrade --install alfredx kestra/kestra -f values.yaml -n default\nkubectl get pods -n default -w\n```\n\n### 5.3 Expose Kestra service via NodePort\n\nExpose:\n\n* UI/API: `30080 -> 8080`\n* Management: `30081 -> 8081`\n\n```bash\nkubectl patch svc alfredx-kestra -n default -p '{\n  \"spec\": {\n    \"type\": \"NodePort\",\n    \"ports\": [\n      {\"name\":\"http\",\"port\":8080,\"protocol\":\"TCP\",\"targetPort\":8080,\"nodePort\":30080},\n      {\"name\":\"management\",\"port\":8081,\"protocol\":\"TCP\",\"targetPort\":8081,\"nodePort\":30081}\n    ]\n  }\n}'\n```\n\nNow you can typically open:\n\n* `http://localhost:30080` (Kestra UI)\n\n---\n\n## 6) The “local image + Docker runner (DinD)” trap — and how to fix it\n\nIf you run tasks with the **Docker task runner**, Kestra often uses **DinD (Docker-in-Docker)**. Important consequence:\n\n> DinD is its own Docker daemon. It does **not** automatically use the node’s image cache or registry settings.\n\nSo even if Kubernetes can pull `kestra-registry:5000/...`, your workflow may fail because DinD tries to use **HTTPS** by default or doesn’t trust your HTTP registry.\n\nYou typically need two fixes:\n\n### Fix A — Make k3s/containerd treat the registry as HTTP\n\nWrite `/etc/rancher/k3s/registries.yaml` inside the k3d node:\n\n```bash\ndocker exec -it k3d-kestra-server-0 sh -lc '\nmkdir -p /etc/rancher/k3s && cat > /etc/rancher/k3s/registries.yaml << \"EOF\"\nmirrors:\n  \"kestra-registry:5000\":\n    endpoint:\n      - \"http://kestra-registry:5000\"\n\nconfigs:\n  \"kestra-registry:5000\":\n    tls:\n      insecure_skip_verify: true\nEOF\ncat /etc/rancher/k3s/registries.yaml\n'\n```\n\nIf you have agent nodes, apply the same change there too.\n\n### Fix B — Tell Kestra’s Docker runner (DinD) to trust the registry (HTTP)\n\nYou have three practical options.\n\n#### Option 1: Set it per task (most direct)\n\n```yaml\ntasks:\n  - id: my_task\n    type: io.kestra.plugin.scripts.shell.Commands\n    containerImage: kestra-registry:5000/kestra-dev:latest\n    taskRunner:\n      type: io.kestra.plugin.scripts.runner.docker.Docker\n      config: |\n        {\n          \"insecure-registries\": [\"kestra-registry:5000\"]\n        }\n    commands:\n      - echo \"it works\"\n```\n\n#### Option 2: Set it globally in Kestra config (applies to all Docker tasks)\n\n```yaml\nplugins:\n  configurations:\n    - type: io.kestra.plugin.scripts.runner.docker.Docker\n      values:\n        insecure-registries:\n          - kestra-registry:5000\n```\n\n#### Option 3: Patch the DinD container args (durable “cluster-level” fix)\n\nAutomatically locate the DinD container index and append an insecure-registry arg:\n\n```bash\nIDX=$(kubectl get deploy -n default alfredx-kestra-worker -o json \\\n  | jq -r '.spec.template.spec.containers\n           | to_entries[]\n           | select(.value.name==\"kestra-worker-docker-dind\")\n           | .key')\n\nkubectl patch deploy -n default alfredx-kestra-worker --type='json' -p=\"[\n  {\\\"op\\\":\\\"add\\\", \\\"path\\\":\\\"/spec/template/spec/containers/${IDX}/args/-\\\",\n   \\\"value\\\":\\\"--insecure-registry=kestra-registry:5000\\\"}\n]\"\n```\n\nThen verify:\n\n```bash\nNEWPOD=$(kubectl get pod -n default -l app.kubernetes.io/component=worker -o jsonpath='{.items[0].metadata.name}')\nkubectl exec -it -n default \"$NEWPOD\" -c kestra-worker-docker-dind -- sh -lc '\ndocker info | sed -n \"/Insecure Registries/,\\$p\"\n'\n```\n\nYou should see `kestra-registry:5000` under *Insecure Registries*.\n\n---\n\n## Suggested “daily workflow” for iterating images\n\nWhenever your task image changes:\n\n```bash\ndocker build -t kestra-dev:latest .\ndocker tag kestra-dev:latest localhost:58046/kestra-dev:latest\ndocker push localhost:58046/kestra-dev:latest\n```\n\nThe cluster will pick up the updated image from the local registry.\n","slug":"Deploy Kestra on a Lightweight k3d (k3s) Cluster","published":1,"updated":"2026-01-18T02:15:27.187Z","comments":1,"layout":"post","photos":[],"_id":"cmkj405lx0000xu08d8msgeup","content":"<h1 id=\"Deploy-Kestra-on-a-Lightweight-k3d-k3s-Cluster-—-A-Practical-Guide\"><a href=\"#Deploy-Kestra-on-a-Lightweight-k3d-k3s-Cluster-—-A-Practical-Guide\" class=\"headerlink\" title=\"Deploy Kestra on a Lightweight k3d (k3s) Cluster — A Practical Guide\"></a>Deploy Kestra on a Lightweight k3d (k3s) Cluster — A Practical Guide</h1><p>This post shows a simple, developer-friendly way to run <strong>Kestra</strong> on a <strong>local k3d (k3s) Kubernetes cluster</strong> powered by <strong>Docker Desktop</strong>. We’ll also cover a very common pain point: <strong>using your own local Docker images</strong> inside Kestra workflows when the <strong>Docker task runner (DinD)</strong> is involved.</p>\n<hr>\n<h2 id=\"What-you’ll-get\"><a href=\"#What-you’ll-get\" class=\"headerlink\" title=\"What you’ll get\"></a>What you’ll get</h2><p>By the end, you will have:</p>\n<ul>\n<li>A k3d cluster with a <strong>built-in local container registry</strong></li>\n<li>A <strong>PostgreSQL</strong> database (Kestra metadata store) exposed via <strong>NodePort</strong></li>\n<li><strong>Kestra</strong> installed via Helm and reachable from your laptop</li>\n<li>A clear solution for <strong>running workflows with Docker images stored in your local registry</strong></li>\n</ul>\n<hr>\n<h2 id=\"Prerequisites\"><a href=\"#Prerequisites\" class=\"headerlink\" title=\"Prerequisites\"></a>Prerequisites</h2><p>Make sure you have:</p>\n<ul>\n<li>Docker Desktop</li>\n<li><code>k3d</code></li>\n<li><code>kubectl</code></li>\n<li><code>helm</code></li>\n<li><code>jq</code> (for patching the DinD container args)</li>\n</ul>\n<hr>\n<h2 id=\"1-Create-a-k3d-cluster-with-a-local-registry\"><a href=\"#1-Create-a-k3d-cluster-with-a-local-registry\" class=\"headerlink\" title=\"1) Create a k3d cluster with a local registry\"></a>1) Create a k3d cluster with a local registry</h2><p>Create the cluster and let k3d create a local registry for you:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">k3d cluster create kestra --registry-create kestra-registry</span><br></pre></td></tr></table></figure>\n\n<p>What this does (good news: you don’t need to do these manually):</p>\n<ul>\n<li>Creates a local registry container (e.g. <code>k3d-kestra-registry</code>)</li>\n<li>Connects the registry to the cluster network</li>\n<li>Writes the correct registry config for k3s&#x2F;containerd</li>\n<li>Registry listens on <strong>5000 inside the cluster</strong>, and is mapped to a <strong>random host port</strong> on your machine</li>\n</ul>\n<p>Find the registry’s exposed host port:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -f name=kestra-registry</span><br></pre></td></tr></table></figure>\n\n<p>Example: if you see host port <code>58046</code>, that’s what you’ll push to.</p>\n<hr>\n<h2 id=\"2-Push-your-custom-image-into-the-local-registry\"><a href=\"#2-Push-your-custom-image-into-the-local-registry\" class=\"headerlink\" title=\"2) Push your custom image into the local registry\"></a>2) Push your custom image into the local registry</h2><p>Assume you built an image locally: <code>kestra-dev:latest</code>. Tag and push it to the registry:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag kestra-dev:latest localhost:58046/kestra-dev:latest</span><br><span class=\"line\">docker push localhost:58046/kestra-dev:latest</span><br></pre></td></tr></table></figure>\n\n<p>Inside the cluster, it will be referenced as:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">kestra-registry:5000/kestra-dev:latest</span></span><br><span class=\"line\"><span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br></pre></td></tr></table></figure>\n\n<p>Because <code>kestra-registry:5000</code> is the <strong>in-cluster registry address</strong>.</p>\n<h3 id=\"Quick-verification-can-Kubernetes-run-the-image\"><a href=\"#Quick-verification-can-Kubernetes-run-the-image\" class=\"headerlink\" title=\"Quick verification: can Kubernetes run the image?\"></a>Quick verification: can Kubernetes run the image?</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl run test-registry \\</span><br><span class=\"line\">  --image=kestra-registry:5000/kestra-dev:latest \\</span><br><span class=\"line\">  --restart=Never --<span class=\"built_in\">command</span> -- <span class=\"built_in\">tail</span> -f /dev/null</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl describe pod test-registry</span><br></pre></td></tr></table></figure>\n\n<p>If the Pod becomes <code>Running</code>, your registry is working.</p>\n<hr>\n<h2 id=\"3-Install-PostgreSQL-Kestra-metadata-DB-via-Helm\"><a href=\"#3-Install-PostgreSQL-Kestra-metadata-DB-via-Helm\" class=\"headerlink\" title=\"3) Install PostgreSQL (Kestra metadata DB) via Helm\"></a>3) Install PostgreSQL (Kestra metadata DB) via Helm</h2><p>We’ll install Bitnami PostgreSQL and expose it with NodePort <code>30432</code>.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p charts &amp;&amp; <span class=\"built_in\">cd</span> charts</span><br><span class=\"line\">helm repo add bitnami https://charts.bitnami.com/bitnami || <span class=\"literal\">true</span></span><br><span class=\"line\">helm repo update</span><br><span class=\"line\">helm pull bitnami/postgresql --untar</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"></span><br><span class=\"line\">NS=default</span><br><span class=\"line\">helm upgrade --install alfredx-postgresql ./charts/postgresql -n <span class=\"variable\">$NS</span> \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> auth.username=alfredx \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> auth.password=<span class=\"string\">&#x27;YOUR_PASSWORD&#x27;</span> \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> auth.database=kestra \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> primary.service.type=NodePort \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> primary.service.nodePorts.postgresql=30432 \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> primary.service.ports.postgresql=5432</span><br></pre></td></tr></table></figure>\n\n<p>This matches a known-working setup: service is NodePort, <code>port: 5432</code>, <code>nodePort: 30432</code>.</p>\n<p>Check status:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl get pods -n default -w</span><br><span class=\"line\">kubectl get svc alfredx-postgresql -n default -o wide</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"4-Optional-Map-ports-from-the-k3d-cluster-to-your-host\"><a href=\"#4-Optional-Map-ports-from-the-k3d-cluster-to-your-host\" class=\"headerlink\" title=\"4) (Optional) Map ports from the k3d cluster to your host\"></a>4) (Optional) Map ports from the k3d cluster to your host</h2><p>If you want to reach NodePorts via <code>localhost:&lt;nodePort&gt;</code> on your laptop, you can <strong>add port mappings</strong> to an existing cluster (experimental, but handy):</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">k3d cluster edit kestra --port-add 30432:30432@server:0</span><br><span class=\"line\">k3d cluster edit kestra --port-add 30080:30080@server:0</span><br><span class=\"line\">k3d cluster edit kestra --port-add 30081:30081@server:0</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"5-Install-Kestra-via-Helm\"><a href=\"#5-Install-Kestra-via-Helm\" class=\"headerlink\" title=\"5) Install Kestra via Helm\"></a>5) Install Kestra via Helm</h2><h3 id=\"5-1-Create-required-Kubernetes-secrets-example\"><a href=\"#5-1-Create-required-Kubernetes-secrets-example\" class=\"headerlink\" title=\"5.1 Create required Kubernetes secrets (example)\"></a>5.1 Create required Kubernetes secrets (example)</h3><p>Create secrets that your flows may need (S3 credentials in this example). <strong>Do not commit real keys</strong>—use your own secret values:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl create secret generic s3-credentials -n default \\</span><br><span class=\"line\">  --from-literal=AWS_ACCESS_KEY_ID=<span class=\"string\">&#x27;YOUR_KEY&#x27;</span> \\</span><br><span class=\"line\">  --from-literal=AWS_SECRET_ACCESS_KEY=<span class=\"string\">&#x27;YOUR_SECRET&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>(Your original notes show this exact pattern. )</p>\n<h3 id=\"5-2-Install-Kestra\"><a href=\"#5-2-Install-Kestra\" class=\"headerlink\" title=\"5.2 Install Kestra\"></a>5.2 Install Kestra</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm upgrade --install alfredx kestra/kestra -f values.yaml -n default</span><br><span class=\"line\">kubectl get pods -n default -w</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-3-Expose-Kestra-service-via-NodePort\"><a href=\"#5-3-Expose-Kestra-service-via-NodePort\" class=\"headerlink\" title=\"5.3 Expose Kestra service via NodePort\"></a>5.3 Expose Kestra service via NodePort</h3><p>Expose:</p>\n<ul>\n<li>UI&#x2F;API: <code>30080 -&gt; 8080</code></li>\n<li>Management: <code>30081 -&gt; 8081</code></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl patch svc alfredx-kestra -n default -p <span class=\"string\">&#x27;&#123;</span></span><br><span class=\"line\"><span class=\"string\">  &quot;spec&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"string\">    &quot;type&quot;: &quot;NodePort&quot;,</span></span><br><span class=\"line\"><span class=\"string\">    &quot;ports&quot;: [</span></span><br><span class=\"line\"><span class=\"string\">      &#123;&quot;name&quot;:&quot;http&quot;,&quot;port&quot;:8080,&quot;protocol&quot;:&quot;TCP&quot;,&quot;targetPort&quot;:8080,&quot;nodePort&quot;:30080&#125;,</span></span><br><span class=\"line\"><span class=\"string\">      &#123;&quot;name&quot;:&quot;management&quot;,&quot;port&quot;:8081,&quot;protocol&quot;:&quot;TCP&quot;,&quot;targetPort&quot;:8081,&quot;nodePort&quot;:30081&#125;</span></span><br><span class=\"line\"><span class=\"string\">    ]</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>Now you can typically open:</p>\n<ul>\n<li><code>http://localhost:30080</code> (Kestra UI)</li>\n</ul>\n<hr>\n<h2 id=\"6-The-“local-image-Docker-runner-DinD-”-trap-—-and-how-to-fix-it\"><a href=\"#6-The-“local-image-Docker-runner-DinD-”-trap-—-and-how-to-fix-it\" class=\"headerlink\" title=\"6) The “local image + Docker runner (DinD)” trap — and how to fix it\"></a>6) The “local image + Docker runner (DinD)” trap — and how to fix it</h2><p>If you run tasks with the <strong>Docker task runner</strong>, Kestra often uses <strong>DinD (Docker-in-Docker)</strong>. Important consequence:</p>\n<blockquote>\n<p>DinD is its own Docker daemon. It does <strong>not</strong> automatically use the node’s image cache or registry settings.</p>\n</blockquote>\n<p>So even if Kubernetes can pull <code>kestra-registry:5000/...</code>, your workflow may fail because DinD tries to use <strong>HTTPS</strong> by default or doesn’t trust your HTTP registry.</p>\n<p>You typically need two fixes:</p>\n<h3 id=\"Fix-A-—-Make-k3s-containerd-treat-the-registry-as-HTTP\"><a href=\"#Fix-A-—-Make-k3s-containerd-treat-the-registry-as-HTTP\" class=\"headerlink\" title=\"Fix A — Make k3s&#x2F;containerd treat the registry as HTTP\"></a>Fix A — Make k3s&#x2F;containerd treat the registry as HTTP</h3><p>Write <code>/etc/rancher/k3s/registries.yaml</code> inside the k3d node:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it k3d-kestra-server-0 sh -lc <span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">mkdir -p /etc/rancher/k3s &amp;&amp; cat &gt; /etc/rancher/k3s/registries.yaml &lt;&lt; &quot;EOF&quot;</span></span><br><span class=\"line\"><span class=\"string\">mirrors:</span></span><br><span class=\"line\"><span class=\"string\">  &quot;kestra-registry:5000&quot;:</span></span><br><span class=\"line\"><span class=\"string\">    endpoint:</span></span><br><span class=\"line\"><span class=\"string\">      - &quot;http://kestra-registry:5000&quot;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">configs:</span></span><br><span class=\"line\"><span class=\"string\">  &quot;kestra-registry:5000&quot;:</span></span><br><span class=\"line\"><span class=\"string\">    tls:</span></span><br><span class=\"line\"><span class=\"string\">      insecure_skip_verify: true</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\">cat /etc/rancher/k3s/registries.yaml</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>If you have agent nodes, apply the same change there too.</p>\n<h3 id=\"Fix-B-—-Tell-Kestra’s-Docker-runner-DinD-to-trust-the-registry-HTTP\"><a href=\"#Fix-B-—-Tell-Kestra’s-Docker-runner-DinD-to-trust-the-registry-HTTP\" class=\"headerlink\" title=\"Fix B — Tell Kestra’s Docker runner (DinD) to trust the registry (HTTP)\"></a>Fix B — Tell Kestra’s Docker runner (DinD) to trust the registry (HTTP)</h3><p>You have three practical options.</p>\n<h4 id=\"Option-1-Set-it-per-task-most-direct\"><a href=\"#Option-1-Set-it-per-task-most-direct\" class=\"headerlink\" title=\"Option 1: Set it per task (most direct)\"></a>Option 1: Set it per task (most direct)</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">tasks:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">id:</span> <span class=\"string\">my_task</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">io.kestra.plugin.scripts.shell.Commands</span></span><br><span class=\"line\">    <span class=\"attr\">containerImage:</span> <span class=\"string\">kestra-registry:5000/kestra-dev:latest</span></span><br><span class=\"line\">    <span class=\"attr\">taskRunner:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">io.kestra.plugin.scripts.runner.docker.Docker</span></span><br><span class=\"line\">      <span class=\"attr\">config:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">        &#123;</span></span><br><span class=\"line\"><span class=\"string\">          &quot;insecure-registries&quot;: [&quot;kestra-registry:5000&quot;]</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span>    <span class=\"attr\">commands:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">echo</span> <span class=\"string\">&quot;it works&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Option-2-Set-it-globally-in-Kestra-config-applies-to-all-Docker-tasks\"><a href=\"#Option-2-Set-it-globally-in-Kestra-config-applies-to-all-Docker-tasks\" class=\"headerlink\" title=\"Option 2: Set it globally in Kestra config (applies to all Docker tasks)\"></a>Option 2: Set it globally in Kestra config (applies to all Docker tasks)</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"attr\">configurations:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">io.kestra.plugin.scripts.runner.docker.Docker</span></span><br><span class=\"line\">      <span class=\"attr\">values:</span></span><br><span class=\"line\">        <span class=\"attr\">insecure-registries:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">kestra-registry:5000</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Option-3-Patch-the-DinD-container-args-durable-“cluster-level”-fix\"><a href=\"#Option-3-Patch-the-DinD-container-args-durable-“cluster-level”-fix\" class=\"headerlink\" title=\"Option 3: Patch the DinD container args (durable “cluster-level” fix)\"></a>Option 3: Patch the DinD container args (durable “cluster-level” fix)</h4><p>Automatically locate the DinD container index and append an insecure-registry arg:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IDX=$(kubectl get deploy -n default alfredx-kestra-worker -o json \\</span><br><span class=\"line\">  | jq -r <span class=\"string\">&#x27;.spec.template.spec.containers</span></span><br><span class=\"line\"><span class=\"string\">           | to_entries[]</span></span><br><span class=\"line\"><span class=\"string\">           | select(.value.name==&quot;kestra-worker-docker-dind&quot;)</span></span><br><span class=\"line\"><span class=\"string\">           | .key&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl patch deploy -n default alfredx-kestra-worker --<span class=\"built_in\">type</span>=<span class=\"string\">&#x27;json&#x27;</span> -p=<span class=\"string\">&quot;[</span></span><br><span class=\"line\"><span class=\"string\">  &#123;\\&quot;op\\&quot;:\\&quot;add\\&quot;, \\&quot;path\\&quot;:\\&quot;/spec/template/spec/containers/<span class=\"variable\">$&#123;IDX&#125;</span>/args/-\\&quot;,</span></span><br><span class=\"line\"><span class=\"string\">   \\&quot;value\\&quot;:\\&quot;--insecure-registry=kestra-registry:5000\\&quot;&#125;</span></span><br><span class=\"line\"><span class=\"string\">]&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>Then verify:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NEWPOD=$(kubectl get pod -n default -l app.kubernetes.io/component=worker -o jsonpath=<span class=\"string\">&#x27;&#123;.items[0].metadata.name&#125;&#x27;</span>)</span><br><span class=\"line\">kubectl <span class=\"built_in\">exec</span> -it -n default <span class=\"string\">&quot;<span class=\"variable\">$NEWPOD</span>&quot;</span> -c kestra-worker-docker-dind -- sh -lc <span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">docker info | sed -n &quot;/Insecure Registries/,\\$p&quot;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>You should see <code>kestra-registry:5000</code> under <em>Insecure Registries</em>.</p>\n<hr>\n<h2 id=\"Suggested-“daily-workflow”-for-iterating-images\"><a href=\"#Suggested-“daily-workflow”-for-iterating-images\" class=\"headerlink\" title=\"Suggested “daily workflow” for iterating images\"></a>Suggested “daily workflow” for iterating images</h2><p>Whenever your task image changes:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t kestra-dev:latest .</span><br><span class=\"line\">docker tag kestra-dev:latest localhost:58046/kestra-dev:latest</span><br><span class=\"line\">docker push localhost:58046/kestra-dev:latest</span><br></pre></td></tr></table></figure>\n\n<p>The cluster will pick up the updated image from the local registry.</p>\n","excerpt":"","more":"<h1 id=\"Deploy-Kestra-on-a-Lightweight-k3d-k3s-Cluster-—-A-Practical-Guide\"><a href=\"#Deploy-Kestra-on-a-Lightweight-k3d-k3s-Cluster-—-A-Practical-Guide\" class=\"headerlink\" title=\"Deploy Kestra on a Lightweight k3d (k3s) Cluster — A Practical Guide\"></a>Deploy Kestra on a Lightweight k3d (k3s) Cluster — A Practical Guide</h1><p>This post shows a simple, developer-friendly way to run <strong>Kestra</strong> on a <strong>local k3d (k3s) Kubernetes cluster</strong> powered by <strong>Docker Desktop</strong>. We’ll also cover a very common pain point: <strong>using your own local Docker images</strong> inside Kestra workflows when the <strong>Docker task runner (DinD)</strong> is involved.</p>\n<hr>\n<h2 id=\"What-you’ll-get\"><a href=\"#What-you’ll-get\" class=\"headerlink\" title=\"What you’ll get\"></a>What you’ll get</h2><p>By the end, you will have:</p>\n<ul>\n<li>A k3d cluster with a <strong>built-in local container registry</strong></li>\n<li>A <strong>PostgreSQL</strong> database (Kestra metadata store) exposed via <strong>NodePort</strong></li>\n<li><strong>Kestra</strong> installed via Helm and reachable from your laptop</li>\n<li>A clear solution for <strong>running workflows with Docker images stored in your local registry</strong></li>\n</ul>\n<hr>\n<h2 id=\"Prerequisites\"><a href=\"#Prerequisites\" class=\"headerlink\" title=\"Prerequisites\"></a>Prerequisites</h2><p>Make sure you have:</p>\n<ul>\n<li>Docker Desktop</li>\n<li><code>k3d</code></li>\n<li><code>kubectl</code></li>\n<li><code>helm</code></li>\n<li><code>jq</code> (for patching the DinD container args)</li>\n</ul>\n<hr>\n<h2 id=\"1-Create-a-k3d-cluster-with-a-local-registry\"><a href=\"#1-Create-a-k3d-cluster-with-a-local-registry\" class=\"headerlink\" title=\"1) Create a k3d cluster with a local registry\"></a>1) Create a k3d cluster with a local registry</h2><p>Create the cluster and let k3d create a local registry for you:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">k3d cluster create kestra --registry-create kestra-registry</span><br></pre></td></tr></table></figure>\n\n<p>What this does (good news: you don’t need to do these manually):</p>\n<ul>\n<li>Creates a local registry container (e.g. <code>k3d-kestra-registry</code>)</li>\n<li>Connects the registry to the cluster network</li>\n<li>Writes the correct registry config for k3s&#x2F;containerd</li>\n<li>Registry listens on <strong>5000 inside the cluster</strong>, and is mapped to a <strong>random host port</strong> on your machine</li>\n</ul>\n<p>Find the registry’s exposed host port:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -f name=kestra-registry</span><br></pre></td></tr></table></figure>\n\n<p>Example: if you see host port <code>58046</code>, that’s what you’ll push to.</p>\n<hr>\n<h2 id=\"2-Push-your-custom-image-into-the-local-registry\"><a href=\"#2-Push-your-custom-image-into-the-local-registry\" class=\"headerlink\" title=\"2) Push your custom image into the local registry\"></a>2) Push your custom image into the local registry</h2><p>Assume you built an image locally: <code>kestra-dev:latest</code>. Tag and push it to the registry:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker tag kestra-dev:latest localhost:58046/kestra-dev:latest</span><br><span class=\"line\">docker push localhost:58046/kestra-dev:latest</span><br></pre></td></tr></table></figure>\n\n<p>Inside the cluster, it will be referenced as:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">image:</span> <span class=\"string\">kestra-registry:5000/kestra-dev:latest</span></span><br><span class=\"line\"><span class=\"attr\">imagePullPolicy:</span> <span class=\"string\">IfNotPresent</span></span><br></pre></td></tr></table></figure>\n\n<p>Because <code>kestra-registry:5000</code> is the <strong>in-cluster registry address</strong>.</p>\n<h3 id=\"Quick-verification-can-Kubernetes-run-the-image\"><a href=\"#Quick-verification-can-Kubernetes-run-the-image\" class=\"headerlink\" title=\"Quick verification: can Kubernetes run the image?\"></a>Quick verification: can Kubernetes run the image?</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl run test-registry \\</span><br><span class=\"line\">  --image=kestra-registry:5000/kestra-dev:latest \\</span><br><span class=\"line\">  --restart=Never --<span class=\"built_in\">command</span> -- <span class=\"built_in\">tail</span> -f /dev/null</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl describe pod test-registry</span><br></pre></td></tr></table></figure>\n\n<p>If the Pod becomes <code>Running</code>, your registry is working.</p>\n<hr>\n<h2 id=\"3-Install-PostgreSQL-Kestra-metadata-DB-via-Helm\"><a href=\"#3-Install-PostgreSQL-Kestra-metadata-DB-via-Helm\" class=\"headerlink\" title=\"3) Install PostgreSQL (Kestra metadata DB) via Helm\"></a>3) Install PostgreSQL (Kestra metadata DB) via Helm</h2><p>We’ll install Bitnami PostgreSQL and expose it with NodePort <code>30432</code>.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> -p charts &amp;&amp; <span class=\"built_in\">cd</span> charts</span><br><span class=\"line\">helm repo add bitnami https://charts.bitnami.com/bitnami || <span class=\"literal\">true</span></span><br><span class=\"line\">helm repo update</span><br><span class=\"line\">helm pull bitnami/postgresql --untar</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"></span><br><span class=\"line\">NS=default</span><br><span class=\"line\">helm upgrade --install alfredx-postgresql ./charts/postgresql -n <span class=\"variable\">$NS</span> \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> auth.username=alfredx \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> auth.password=<span class=\"string\">&#x27;YOUR_PASSWORD&#x27;</span> \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> auth.database=kestra \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> primary.service.type=NodePort \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> primary.service.nodePorts.postgresql=30432 \\</span><br><span class=\"line\">  --<span class=\"built_in\">set</span> primary.service.ports.postgresql=5432</span><br></pre></td></tr></table></figure>\n\n<p>This matches a known-working setup: service is NodePort, <code>port: 5432</code>, <code>nodePort: 30432</code>.</p>\n<p>Check status:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl get pods -n default -w</span><br><span class=\"line\">kubectl get svc alfredx-postgresql -n default -o wide</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"4-Optional-Map-ports-from-the-k3d-cluster-to-your-host\"><a href=\"#4-Optional-Map-ports-from-the-k3d-cluster-to-your-host\" class=\"headerlink\" title=\"4) (Optional) Map ports from the k3d cluster to your host\"></a>4) (Optional) Map ports from the k3d cluster to your host</h2><p>If you want to reach NodePorts via <code>localhost:&lt;nodePort&gt;</code> on your laptop, you can <strong>add port mappings</strong> to an existing cluster (experimental, but handy):</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">k3d cluster edit kestra --port-add 30432:30432@server:0</span><br><span class=\"line\">k3d cluster edit kestra --port-add 30080:30080@server:0</span><br><span class=\"line\">k3d cluster edit kestra --port-add 30081:30081@server:0</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"5-Install-Kestra-via-Helm\"><a href=\"#5-Install-Kestra-via-Helm\" class=\"headerlink\" title=\"5) Install Kestra via Helm\"></a>5) Install Kestra via Helm</h2><h3 id=\"5-1-Create-required-Kubernetes-secrets-example\"><a href=\"#5-1-Create-required-Kubernetes-secrets-example\" class=\"headerlink\" title=\"5.1 Create required Kubernetes secrets (example)\"></a>5.1 Create required Kubernetes secrets (example)</h3><p>Create secrets that your flows may need (S3 credentials in this example). <strong>Do not commit real keys</strong>—use your own secret values:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl create secret generic s3-credentials -n default \\</span><br><span class=\"line\">  --from-literal=AWS_ACCESS_KEY_ID=<span class=\"string\">&#x27;YOUR_KEY&#x27;</span> \\</span><br><span class=\"line\">  --from-literal=AWS_SECRET_ACCESS_KEY=<span class=\"string\">&#x27;YOUR_SECRET&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>(Your original notes show this exact pattern. )</p>\n<h3 id=\"5-2-Install-Kestra\"><a href=\"#5-2-Install-Kestra\" class=\"headerlink\" title=\"5.2 Install Kestra\"></a>5.2 Install Kestra</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">helm upgrade --install alfredx kestra/kestra -f values.yaml -n default</span><br><span class=\"line\">kubectl get pods -n default -w</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-3-Expose-Kestra-service-via-NodePort\"><a href=\"#5-3-Expose-Kestra-service-via-NodePort\" class=\"headerlink\" title=\"5.3 Expose Kestra service via NodePort\"></a>5.3 Expose Kestra service via NodePort</h3><p>Expose:</p>\n<ul>\n<li>UI&#x2F;API: <code>30080 -&gt; 8080</code></li>\n<li>Management: <code>30081 -&gt; 8081</code></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kubectl patch svc alfredx-kestra -n default -p <span class=\"string\">&#x27;&#123;</span></span><br><span class=\"line\"><span class=\"string\">  &quot;spec&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"string\">    &quot;type&quot;: &quot;NodePort&quot;,</span></span><br><span class=\"line\"><span class=\"string\">    &quot;ports&quot;: [</span></span><br><span class=\"line\"><span class=\"string\">      &#123;&quot;name&quot;:&quot;http&quot;,&quot;port&quot;:8080,&quot;protocol&quot;:&quot;TCP&quot;,&quot;targetPort&quot;:8080,&quot;nodePort&quot;:30080&#125;,</span></span><br><span class=\"line\"><span class=\"string\">      &#123;&quot;name&quot;:&quot;management&quot;,&quot;port&quot;:8081,&quot;protocol&quot;:&quot;TCP&quot;,&quot;targetPort&quot;:8081,&quot;nodePort&quot;:30081&#125;</span></span><br><span class=\"line\"><span class=\"string\">    ]</span></span><br><span class=\"line\"><span class=\"string\">  &#125;</span></span><br><span class=\"line\"><span class=\"string\">&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>Now you can typically open:</p>\n<ul>\n<li><code>http://localhost:30080</code> (Kestra UI)</li>\n</ul>\n<hr>\n<h2 id=\"6-The-“local-image-Docker-runner-DinD-”-trap-—-and-how-to-fix-it\"><a href=\"#6-The-“local-image-Docker-runner-DinD-”-trap-—-and-how-to-fix-it\" class=\"headerlink\" title=\"6) The “local image + Docker runner (DinD)” trap — and how to fix it\"></a>6) The “local image + Docker runner (DinD)” trap — and how to fix it</h2><p>If you run tasks with the <strong>Docker task runner</strong>, Kestra often uses <strong>DinD (Docker-in-Docker)</strong>. Important consequence:</p>\n<blockquote>\n<p>DinD is its own Docker daemon. It does <strong>not</strong> automatically use the node’s image cache or registry settings.</p>\n</blockquote>\n<p>So even if Kubernetes can pull <code>kestra-registry:5000/...</code>, your workflow may fail because DinD tries to use <strong>HTTPS</strong> by default or doesn’t trust your HTTP registry.</p>\n<p>You typically need two fixes:</p>\n<h3 id=\"Fix-A-—-Make-k3s-containerd-treat-the-registry-as-HTTP\"><a href=\"#Fix-A-—-Make-k3s-containerd-treat-the-registry-as-HTTP\" class=\"headerlink\" title=\"Fix A — Make k3s&#x2F;containerd treat the registry as HTTP\"></a>Fix A — Make k3s&#x2F;containerd treat the registry as HTTP</h3><p>Write <code>/etc/rancher/k3s/registries.yaml</code> inside the k3d node:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker <span class=\"built_in\">exec</span> -it k3d-kestra-server-0 sh -lc <span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">mkdir -p /etc/rancher/k3s &amp;&amp; cat &gt; /etc/rancher/k3s/registries.yaml &lt;&lt; &quot;EOF&quot;</span></span><br><span class=\"line\"><span class=\"string\">mirrors:</span></span><br><span class=\"line\"><span class=\"string\">  &quot;kestra-registry:5000&quot;:</span></span><br><span class=\"line\"><span class=\"string\">    endpoint:</span></span><br><span class=\"line\"><span class=\"string\">      - &quot;http://kestra-registry:5000&quot;</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">configs:</span></span><br><span class=\"line\"><span class=\"string\">  &quot;kestra-registry:5000&quot;:</span></span><br><span class=\"line\"><span class=\"string\">    tls:</span></span><br><span class=\"line\"><span class=\"string\">      insecure_skip_verify: true</span></span><br><span class=\"line\"><span class=\"string\">EOF</span></span><br><span class=\"line\"><span class=\"string\">cat /etc/rancher/k3s/registries.yaml</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>If you have agent nodes, apply the same change there too.</p>\n<h3 id=\"Fix-B-—-Tell-Kestra’s-Docker-runner-DinD-to-trust-the-registry-HTTP\"><a href=\"#Fix-B-—-Tell-Kestra’s-Docker-runner-DinD-to-trust-the-registry-HTTP\" class=\"headerlink\" title=\"Fix B — Tell Kestra’s Docker runner (DinD) to trust the registry (HTTP)\"></a>Fix B — Tell Kestra’s Docker runner (DinD) to trust the registry (HTTP)</h3><p>You have three practical options.</p>\n<h4 id=\"Option-1-Set-it-per-task-most-direct\"><a href=\"#Option-1-Set-it-per-task-most-direct\" class=\"headerlink\" title=\"Option 1: Set it per task (most direct)\"></a>Option 1: Set it per task (most direct)</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">tasks:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">id:</span> <span class=\"string\">my_task</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">io.kestra.plugin.scripts.shell.Commands</span></span><br><span class=\"line\">    <span class=\"attr\">containerImage:</span> <span class=\"string\">kestra-registry:5000/kestra-dev:latest</span></span><br><span class=\"line\">    <span class=\"attr\">taskRunner:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">io.kestra.plugin.scripts.runner.docker.Docker</span></span><br><span class=\"line\">      <span class=\"attr\">config:</span> <span class=\"string\">|</span></span><br><span class=\"line\"><span class=\"string\">        &#123;</span></span><br><span class=\"line\"><span class=\"string\">          &quot;insecure-registries&quot;: [&quot;kestra-registry:5000&quot;]</span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\"></span>    <span class=\"attr\">commands:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">echo</span> <span class=\"string\">&quot;it works&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Option-2-Set-it-globally-in-Kestra-config-applies-to-all-Docker-tasks\"><a href=\"#Option-2-Set-it-globally-in-Kestra-config-applies-to-all-Docker-tasks\" class=\"headerlink\" title=\"Option 2: Set it globally in Kestra config (applies to all Docker tasks)\"></a>Option 2: Set it globally in Kestra config (applies to all Docker tasks)</h4><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"attr\">configurations:</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">type:</span> <span class=\"string\">io.kestra.plugin.scripts.runner.docker.Docker</span></span><br><span class=\"line\">      <span class=\"attr\">values:</span></span><br><span class=\"line\">        <span class=\"attr\">insecure-registries:</span></span><br><span class=\"line\">          <span class=\"bullet\">-</span> <span class=\"string\">kestra-registry:5000</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Option-3-Patch-the-DinD-container-args-durable-“cluster-level”-fix\"><a href=\"#Option-3-Patch-the-DinD-container-args-durable-“cluster-level”-fix\" class=\"headerlink\" title=\"Option 3: Patch the DinD container args (durable “cluster-level” fix)\"></a>Option 3: Patch the DinD container args (durable “cluster-level” fix)</h4><p>Automatically locate the DinD container index and append an insecure-registry arg:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IDX=$(kubectl get deploy -n default alfredx-kestra-worker -o json \\</span><br><span class=\"line\">  | jq -r <span class=\"string\">&#x27;.spec.template.spec.containers</span></span><br><span class=\"line\"><span class=\"string\">           | to_entries[]</span></span><br><span class=\"line\"><span class=\"string\">           | select(.value.name==&quot;kestra-worker-docker-dind&quot;)</span></span><br><span class=\"line\"><span class=\"string\">           | .key&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">kubectl patch deploy -n default alfredx-kestra-worker --<span class=\"built_in\">type</span>=<span class=\"string\">&#x27;json&#x27;</span> -p=<span class=\"string\">&quot;[</span></span><br><span class=\"line\"><span class=\"string\">  &#123;\\&quot;op\\&quot;:\\&quot;add\\&quot;, \\&quot;path\\&quot;:\\&quot;/spec/template/spec/containers/<span class=\"variable\">$&#123;IDX&#125;</span>/args/-\\&quot;,</span></span><br><span class=\"line\"><span class=\"string\">   \\&quot;value\\&quot;:\\&quot;--insecure-registry=kestra-registry:5000\\&quot;&#125;</span></span><br><span class=\"line\"><span class=\"string\">]&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>Then verify:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NEWPOD=$(kubectl get pod -n default -l app.kubernetes.io/component=worker -o jsonpath=<span class=\"string\">&#x27;&#123;.items[0].metadata.name&#125;&#x27;</span>)</span><br><span class=\"line\">kubectl <span class=\"built_in\">exec</span> -it -n default <span class=\"string\">&quot;<span class=\"variable\">$NEWPOD</span>&quot;</span> -c kestra-worker-docker-dind -- sh -lc <span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">docker info | sed -n &quot;/Insecure Registries/,\\$p&quot;</span></span><br><span class=\"line\"><span class=\"string\">&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>You should see <code>kestra-registry:5000</code> under <em>Insecure Registries</em>.</p>\n<hr>\n<h2 id=\"Suggested-“daily-workflow”-for-iterating-images\"><a href=\"#Suggested-“daily-workflow”-for-iterating-images\" class=\"headerlink\" title=\"Suggested “daily workflow” for iterating images\"></a>Suggested “daily workflow” for iterating images</h2><p>Whenever your task image changes:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t kestra-dev:latest .</span><br><span class=\"line\">docker tag kestra-dev:latest localhost:58046/kestra-dev:latest</span><br><span class=\"line\">docker push localhost:58046/kestra-dev:latest</span><br></pre></td></tr></table></figure>\n\n<p>The cluster will pick up the updated image from the local registry.</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cmkj405lx0000xu08d8msgeup","category_id":"cmkj405lz0001xu08bps9c069","_id":"cmkj405m00004xu087jsy2wjr"}],"PostTag":[{"post_id":"cmkj405lx0000xu08d8msgeup","tag_id":"cmkj405m00002xu08dj0ygjsj","_id":"cmkj405m00003xu08djt124gh"}],"Tag":[{"name":"Kestra","_id":"cmkj405m00002xu08dj0ygjsj"}]}}